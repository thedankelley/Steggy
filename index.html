<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Steggy 2.0</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#121212">

<link rel="manifest" href="./manifest.json">

<style>
body {
  margin: 0;
  background: #121212;
  color: #fff;
  font-family: system-ui, sans-serif;
}

header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: #1e1e1e;
}

header img {
  width: 36px;
  height: 36px;
}

main {
  max-width: 960px;
  margin: auto;
  padding: 16px;
}

section {
  border: 1px solid #333;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 20px;
}

textarea, input, select, button {
  width: 100%;
  margin-top: 6px;
  padding: 10px;
  border-radius: 6px;
  border: none;
  font-size: 1rem;
}

button {
  background: #3f51b5;
  color: white;
  cursor: pointer;
}

button.secondary {
  background: #555;
}

.hidden {
  display: none;
}

.row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.row > * {
  flex: 1;
}

#guideModal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  padding: 24px;
  overflow-y: auto;
  z-index: 999;
}
</style>
</head>

<body>

<header>
  <img src="./icons/icon-192.png" alt="Steggy">
  <h1>Steggy 2.0</h1>
  <button id="guideBtn" class="secondary">üìò Guide</button>
</header>

<main>

<section>
  <h2>Mode</h2>
  <select id="modeSelect">
    <option value="encrypt">Encrypt Image</option>
    <option value="decrypt">Decrypt Image</option>
    <option value="sstv-encode">SSTV Encode</option>
    <option value="sstv-decode">SSTV Decode</option>
  </select>
</section>

<section id="imageSection">
  <h2>Image</h2>
  <input type="file" id="imageInput" accept="image/*">
</section>

<section id="sstvSection" class="hidden">
  <h2>SSTV</h2>

  <div id="sstvEncodeControls" class="hidden">
    <p>SSTV audio will be generated from the image.</p>
  </div>

  <div id="sstvDecodeControls" class="hidden">
    <input type="file" id="sstvWavInput" accept=".wav">
    <div class="row">
      <button id="sstvMicStart">üéô Start Mic</button>
      <button id="sstvMicStop">‚èπ Stop & Decode</button>
    </div>
  </div>
</section>

<section>
  <h2>Protected Message</h2>
  <textarea id="protectedMessage" rows="5"></textarea>

  <h3>Decoy Message</h3>
  <textarea id="decoyMessage" rows="3"></textarea>

  <button id="advancedToggle" class="secondary">
    Advanced Options
  </button>
</section>

<section id="advancedSection" class="hidden">
  <h2>Encryption</h2>

  <select id="encryptionMode">
    <option value="aes">AES-GCM</option>
    <option value="pgp">PGP</option>
    <option value="both">PGP + AES</option>
  </select>

  <div id="pgpSection" class="hidden">
    <button id="generatePGP">Generate PGP Keys</button>

    <textarea id="pgpPublic" placeholder="PGP Public Key"></textarea>
    <textarea id="pgpPrivate" placeholder="PGP Private Key"></textarea>

    <div class="row">
      <button id="downloadPublic">Download Public</button>
      <button id="downloadPrivate">Download Private</button>
    </div>

    <button id="encryptWithPGP">Encrypt Message with PGP</button>
    <button id="decryptWithPGP">Decrypt PGP Payload</button>
  </div>
</section>

<section>
  <button id="runBtn">Run</button>
</section>

<section>
  <h2>Status</h2>
  <div id="status"></div>
  <div id="hashes"></div>
  <div id="output"></div>
</section>

</main>

<div id="guideModal" class="hidden">
  <h2>Steggy Guide</h2>
  <p>
    Steggy allows you to hide information inside images or audio
    without relying on centralized messaging systems.
  </p>

  <p>
    Use PGP for high-risk scenarios. Use decoys and fragmentation
    to resist coercive extraction.
  </p>

  <button id="closeGuide">Close</button>
</div>

<script type="module" src="./ui/app.js"></script>
</body>
</html>
