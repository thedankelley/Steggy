<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Steggy ステギー</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="ui/styles.css">
</head>
<body class="dark">

<header>
  <img src="icons/icon-512.png" class="logo">
  <h1>Steggy <span class="jp">ステギー</span></h1>
</header>

<main>
  <section>
    <label>Mode</label>
    <select id="mode">
      <option value="encrypt">Encrypt</option>
      <option value="decrypt">Decrypt</option>
    </select>
  </section>

  <section>
    <label>Carrier Image</label>
    <input type="file" id="imageInput" accept="image/*">
    <canvas id="previewCanvas"></canvas>
    <div id="imageHash"></div>
  </section>

  <section id="encryptSection">
    <label>Protected Message</label>
    <textarea id="protectedMessage" rows="6"></textarea>

    <label>Decoy Message (optional)</label>
    <textarea id="decoyMessage" rows="4"></textarea>

    <button id="advancedToggle">Advanced Options</button>

    <div id="advancedOptions" hidden>
      <label>Encryption Mode</label>
      <select id="cryptoMode">
        <option value="none">None</option>
        <option value="aes">AES-GCM</option>
        <option value="pgp">PGP</option>
        <option value="both">AES + PGP</option>
      </select>

      <div id="aesOptions" hidden>
        <label>AES Password</label>
        <input type="password" id="aesPassword">
      </div>

      <div id="pgpOptions" hidden>
        <label>PGP Public Key</label>
        <textarea id="pgpPublicKey" rows="5"></textarea>
        <button id="generatePGP">Generate PGP Keys</button>
        <button id="encryptWithPGP">Encrypt Message with Public Key</button>
        <button id="downloadPGPPub">Download Public Key</button>
        <button id="downloadPGPPriv">Download Private Key</button>
        <textarea id="pgpPrivateKey" rows="5" placeholder="Private key will appear here"></textarea>
      </div>

      <label>
        <input type="checkbox" id="fragmentToggle">
        Enable Fragmentation
      </label>
    </div>

    <button id="runEncrypt">Run Encrypt</button>
  </section>

  <section id="decryptSection" hidden>
    <label>Extract Options</label>
    <button id="decryptPGP">Decrypt PGP Payload</button>
    <input type="file" id="pgpKeyUpload">
    <textarea id="decryptOutput" rows="8"></textarea>
  </section>

  <section>
    <img id="outputImage">
    <a id="downloadLink">Download Image</a>
  </section>
</main>

<script type="module" src="ui/app.js"></script>
</body>
</html>
