<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Steggy 2.0 ステギー</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0b0b0b">

  <link rel="manifest" href="manifest.json">
  <link rel="icon" sizes="512x512" href="icons/icon-512.png">

  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #0b0b0b;
      color: #eaeaea;
    }

    header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      border-bottom: 1px solid #222;
    }

    header img {
      width: 32px;
      height: 32px;
    }

    main {
      padding: 16px;
      max-width: 900px;
      margin: auto;
    }

    section {
      margin-bottom: 24px;
      padding: 16px;
      border: 1px solid #222;
      border-radius: 8px;
    }

    textarea {
      width: 100%;
      min-height: 140px;
      background: #111;
      color: #fff;
      border: 1px solid #333;
      border-radius: 4px;
      padding: 8px;
    }

    select, button, input[type="file"] {
      background: #111;
      color: #fff;
      border: 1px solid #333;
      border-radius: 4px;
      padding: 6px;
    }

    .warning {
      color: #ff9f43;
      font-size: 0.9em;
    }

    .hidden {
      display: none;
    }

    footer {
      text-align: center;
      font-size: 0.8em;
      opacity: 0.7;
      padding: 16px;
    }
  </style>
</head>
<body>

<header>
  <img src="icons/icon-512.png">
  <h1>Steggy 2.0 ステギー</h1>
</header>

<main>

<section>
  <h2>Mode</h2>
  <select id="modeSelect">
    <option value="encrypt">Encrypt</option>
    <option value="decrypt">Decrypt</option>
  </select>
</section>

<section>
  <h2>Image</h2>
  <input type="file" id="imageInput" accept="image/*">
  <canvas id="imageCanvas" class="hidden"></canvas>
</section>

<section id="encryptSection">
  <h2>Encrypt</h2>
  <textarea id="protectedMessage" placeholder="Protected message"></textarea>
  <textarea id="decoyMessage" placeholder="Decoy message"></textarea>
  <button id="encryptBtn">Encrypt into Image</button>
</section>

<section id="decryptSection" class="hidden">
  <h2>Decrypt</h2>

  <button id="decryptBtn">Extract from Image</button>
  <pre id="decryptOutput"></pre>

  <h3>Decode SSTV Audio</h3>
  <input type="file" id="sstvAudioInput" accept="audio/*">
  <select id="sstvDecodeMode">
    <option value="MARTIN_M1">Martin M1</option>
    <option value="SCOTTIE_S1">Scottie S1</option>
  </select>
  <button id="decodeSSTVBtn">Decode SSTV Audio</button>

  <p class="warning">
    SSTV decoding is observable and not encrypted.
  </p>
</section>

<section id="sstvSection" class="hidden">
  <h2>Emergency Transport (Observable)</h2>
  <label>
    <input type="checkbox" id="enableSSTV">
    Generate SSTV audio from image
  </label>
  <div id="sstvOptions" class="hidden">
    <select id="sstvMode"></select>
    <button id="downloadSSTV">Download SSTV WAV</button>
  </div>
</section>

</main>

<footer>Created by Dan.</footer>

<script type="module" src="app.js"></script>
</body>
</html>
